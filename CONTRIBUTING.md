Contributors Guide
==================
<!-- TOC START: generated by generate-md-toc.py, do not edit below this line -->

- [Getting started](#getting-started)
  - [Build](#build)
  - [Unit Tests](#unit-tests)
  - [Integration Tests](#integration-tests)
  - [Run in DCOS](#run-in-dcos)
    - [Deploy from local custom Universe](#deploy-from-local-custom-universe)
    - [Deploy from custom branch in Universe repo](#deploy-from-custom-branch-in-universe-repo)
- [Working with the [mesos-commons](https://github.com/mesosphere/mesos-commons) submodule](#working-with-the-mesos-commonshttpsgithubcommesospheremesos-commons-submodule)

<!-- TOC END: generated by generate-md-toc.py, do not edit above this line -->

==================

## Overview

### Proposing Features
If you would like to propose a new feature or a significant change, first open an issue to discuss it.  Project shepherds will provide feedback on the proposed change in terms of feasibility, design, and implementation guidance.  While all proposals are welcome, those that conflict with our roadmap or design principles may not be accepted.

### Creating Pull Requests
Create pull requests against the [`master`](https://github.com/mesosphere/dcos-kafka-service/tree/master) branch. If your change can be generalized to other frameworks, please contribute those changes to the [mesosphere/dcos-commons](https://github.com/mesosphere/dcos-commons) repo, including example usage in the hello-world reference framework. In all cases, be sure to include unit tests and integration tests, as well as updates to the documentation. 

Simple pull requests (e.g., to fix documentation or comments) are welcome without an issue, but any substantial changes require an issue and discussion ahead of time.

### Merge Approvals
Pull requests are reviewed and tested prior to merging.  Often shepherds will ask contributors to make changes based on our style guidelines, design principles, or project goals.  An initial response is typically provided in less than one week.

### Communication
Most communication is done primarily over Slack. Join us via http://chat.dcos.io in the __#data-services__ and __#data-services-dev__ channels, for users and developers respectively.

To build a healthy, respectful community, we follow [Githubâ€™s community guidelines](https://help.github.com/articles/github-community-guidelines/#building-a-strong-community).

### Licensing
DC/OS Kafka Service is licensed under the [Apache License, Version 2.0](LICENSE). Any code you submit must be under that license.

For significant changes, we may ask you to sign a [Contributor License Agreement](http://en.wikipedia.org/wiki/Contributor_License_Agreement).

==================

## Getting started

### Build

``` bash
git clone https://github.com/mesosphere/dcos-kafka-service
cd dcos-kafka-service
./gradlew clean check build
```

#### Build CLI

Prerequisites:
- Go 1.5+ with `GOPATH` defined

``` bash
cd cli/
./build-cli.sh
./dcos-kafka/dcos-kafka-linux kafka -h
```

### Unit Tests

``` bash
./gradlew test
```

## Integration Tests

The Kafka framework uses [shakedown](https://github.com/dcos/shakedown) for specifying integration tests against a DC/OS cluster. The environment setup logic is specified in `integration/run.sh`, which relies for now on the `dcos-tests` repo having been cloned into this one. The `shakedown` test suite is easily run manually if you have a DC/OS cluster already on hand. In this case, you need only install `shakedown` and its dependencies into a virtualenv and then run it with your DC/OS cluster URL as a command-line argument:

    $ cd integration
    $ virtualenv -p python3.5 env
    $ source env/bin/activate
    (env) $ pip install -r requirements.txt
    (env) $ shakedown --dcos-url $(dcos config show core.dcos_url) --ssh-key-file $CLUSTER_KEY_FILE tests/

### Run in DCOS

Prerequisites:
- Have a DCOS cluster somewhere
- Install [dcos-cli](https://docs.mesosphere.com/administration/introcli/cli/)

#### Deploy from a custom Universe

Get the link to the Universe zip (e.g. from the "upload" step of your PR's build). With that in hand:

``` bash
dcos package repo add --index=0 repo-name https://uri.to.build/universe-name.zip
dcos package install kafka
```

If you're testing a config change that you want to be in effect at framework launch:

``` bash
dcos package install kafka options=/path/to/options.json
```
